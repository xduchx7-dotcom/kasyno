<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shulker Kasyno</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }

  h1 {
    color: #ff6aff;
    margin-bottom: 20px;
    text-shadow: 2px 2px 8px #000;
  }

  #countdown {
    font-size: 20px;
    margin-bottom: 20px;
    color: #00ffcc;
    font-weight: bold;
    text-shadow: 1px 1px 2px #000;
  }

  #payments {
    list-style: none;
    padding: 0;
    width: 350px;
  }

  #payments li {
    background: #222;
    margin: 8px 0;
    padding: 12px;
    border-radius: 10px;
    box-shadow: 1px 1px 8px #000;
    transition: all 0.3s ease;
  }

  #payments li.new {
    background: #00ffcc;
    color: #000;
    font-weight: bold;
    animation: highlight 1s ease-in-out;
  }

  @keyframes highlight {
    0% { background: #00ffcc; }
    100% { background: #222; color: #fff; }
  }
</style>
</head>
<body>
<h1>Shulker Kasyno</h1>
<div id="countdown">Odświeżenie za 60s</div>
<ul id="payments"></ul>

<script>
const paymentsList = document.getElementById('payments');
const countdownElem = document.getElementById('countdown');
let countdown = 60;
let previousPayments = [];

// Funkcja do anonimizowania graczy
function anonymizeUser(index) {
  return `Gracz #${index + 1}`;
}

async function fetchPayments() {
  try {
    const res = await fetch('https://twoj-serwer.com/api/payments'); // <-- podmień na swoje API
    const data = await res.json();

    paymentsList.innerHTML = '';
    data.forEach((p, index) => {
      const li = document.createElement('li');
      li.textContent = `${anonymizeUser(index)} → ${p.amount}`;

      // Jeśli nowa płatność, dodaj efekt animacji
      if (!previousPayments.some(prev => prev.user === p.user && prev.amount === p.amount)) {
        li.classList.add('new');
      }

      paymentsList.appendChild(li);
    });

    previousPayments = data;
  } catch (e) {
    console.error('Błąd pobierania płatności:', e);
  }
}

function updateCountdown() {
  countdownElem.textContent = `Odświeżenie za ${countdown}s`;
  if (countdown === 0) {
    fetchPayments();
    countdown = 60;
  }
  countdown--;
}

// Start
fetchPayments();
setInterval(updateCountdown, 1000);
</script>
</body>
</html>

